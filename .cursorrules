# FamilyEye Project Rules

Welcome to the FamilyEye project. Here are the core rules and guidelines for this codebase.

## Windows Agent Build Process

To build the FamilyEye Windows Agent and Installer, follow these specific steps:

1.  **Stop services/processes**: Always ensure `FamilyEyeAgent` service is stopped before building.
2.  **Run Build Script**: Use the centralized script: `python installer/agent/build_agent.py`.
3.  **Compile Installer**: Use Inno Setup: `iscc installer/agent/setup_agent_2.3.0.iss`.

For a detailed breakdown of the architecture (Service vs User Agent) and build steps, refer to:
[build-process.md](file:///.agent/rules/build-process.md)

## Android Agent Management

To manage, build, and test the Android Agent via ADB:
- **Build APK**: Use `./gradlew.bat assembleDebug` in `clients/android`.
- **ADB Management**: Use the detailed guide for Device Owner setup and persistence testing.

For ADB commands and Device Owner procedures, refer to:
[android-adb-management.md](file:///.agent/rules/android-adb-management.md)

## Coding Standards
- Use `Path` objects from `pathlib` for all file/directory operations.
- All agent logs should go to `C:\ProgramData\FamilyEye\Agent\Logs`.
- Named Pipe IPC is the only way to communicate between Session 0 (service) and the User Agent.
- UI elements must ONLY be implemented in `child_agent.py` (FamilyEyeAgent.exe).
